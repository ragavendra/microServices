services:
  producer:
    container_name: producerCont
    build:
      context: ./prod
      dockerfile: ./Dockerfile
    deploy:
      resources:
        limits:
          memory: 160M
    restart: unless-stopped

  consumer:
    container_name: consumerCont
    build:
      context: ./cons
      dockerfile: ./Dockerfile
    deploy:
      resources:
        limits:
          memory: 160M
    restart: unless-stopped

  srvc1:
    container_name: srvcOneCont
    build:
      context: ./
      dockerfile: ./Dockerfile
    deploy:
      resources:
        limits:
          memory: 160M
    restart: unless-stopped
    ports:
      - 5187:5000

  srvc2:
    container_name: srvcTwoCont
    build:
      context: ./
      dockerfile: ./Dockerfile
    deploy:
      resources:
        limits:
          memory: 160M
    restart: unless-stopped
    ports:
      - 5188:5001
